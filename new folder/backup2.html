<!DOCTYPE html5>
<html lang="en">
    <head>
        <title>Template</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--Tailwind css-->
        <script src="https://cdn.tailwindcss.com"></script>


        <!--Alpine Js-->
        <script defer src="https://unpkg.com/alpinejs@3.10.2/dist/cdn.min.js"></script>
            

        <!--Vue Js-->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    </head>
    <body class="font-serif bg-gray-200 relative">
        <div id="app">


            <!--Header-->
            <header>
                <p>
                    <div class="sticky top-0 flex flex-row justify-between items-center bg-gradient-to-r from-cyan-500 to-sky-500 text-gray-200 px-8 py-2 md:py-0">
                        
                        <nav class="hidden md:block">
                            <ul class="flex flex-row">
                                <a href="template.html"><img src="./img/fork.jpg" class="rounded-full w-8 h-8 inline-block mt-3 border-2 border-sky-300"></a>
                            <a href="template.html" class="hover:bg-black/20"><li class="px-4 border-r-2 border-gray-200 py-4">Home</li></a>
                            <a class="cursor-pointer hover:bg-black/20"><li class="px-4 border-r-2 border-gray-200 py-4">Products</li></a>
                            <a href="pastorders.html" class="hover:bg-black/20"><li class="px-4 border-r-2 border-gray-200 py-4">Past Orders</li></a>
                            </ul>
                            </nav>
                       
                            <div class="hidden md:block">
                                <div class="flex flex-row">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                                </svg>

                                <a @click="visibletoggler" class="cursor-pointer"><p>Cart ({{totaQuantity}})</p></a>
                                </div>
                                </div>
                                
                                


                                <div class="md:hidden flex flex-row justify-between items-center w-full">
                                    <a href="template.html"><img src="./img/fork.jpg" class="rounded-full w-7 h-7 border-2 border-sky-300"></a>
                                   

                                    <svg @click="toggler" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" :class="{'rotate-90' : show}" class="transition duration-500 ease-in-out w-8 h-8">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                                    </svg>

                                
                                    
                           
                            </div>

  
                        </div>

                        <div v-if="show" class="md:hidden">
                            <nav class="bg-gradient-to-r from-cyan-500 to-sky-500 w-full text-gray-200">
                                        <ul class="flex flex-col justify-center items-center">
                                        <a href="template.html" class="hover:bg-black/20 w-full text-center"> <li class="px-4 py-4">Home</li></a>
                                        <a class="cursor-pointer hover:bg-black/20 w-full text-center"><li class="px-4 py-4">Products</li></a>
                                        <a href="pastorders.html" class="hover:bg-black/20 w-full text-center"><li class="px-4 py-4">Past Orders</li></a>
                                        </ul>


                                        
                                <div class="flex flex-row justify-center items-center pb-4 hover:bg-black/20 w-full text-center pt-4">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                                </svg>

                                <a @click="visibletoggler" class="cursor-pointer"><p>Cart ({{totalItem}})</p></a>
                                </div>
                                

                                        </nav>



                                        
                            </div>


                            <!--sidebar-->

                            <div v-if="visible" :cart="cart" class="bg-black/80 w-[90%] md:w-1/3 absolute right-0 top-0 bottom-0">
                                <div class="flex flex-row justify-between items-center pb-4 bg-sky-700 w-full">
                                   
                                    <div class="flex flex-row mt-4 text-gray-300">
                                    <p class="mx-4 font-bold">Cart</p>
                                    <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 stroke-gray-300">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                                    </svg></span>
                                        </div>
                                    


                                    <svg @click="visible= false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 absolute top-4 right-4 cursor-pointer stroke-gray-300">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>

                                    </div>


                                <div class="flex flex-col md:flex-row justify-center items-center mx-4">
                            
                         <table class="text-gray-300">
                            <tr class="">
                                <th>Image</th>
                                <th  class="px-6 md:px-4 py-4">Products</th>
                                <th  class="px-6 md:px-4 py-4">Price</th>
                                <th  class="px-6 md:px-4 py-4">Quantity</th>
                                <th  class="px-6 md:px-4 py-4">Total</th>
                                </tr>

                                <tr v-for="(quantity, key, i) in cart" :key="i">
                                <td><img src="img/banga.jpg" class="md:w-1/6 w-full md:hover:scale-125 border shadow-xl border-white" />
                                    </td>
                                <td class="px-6 md:px-4 py-4">{{key}}</td>
                                <td class="px-6 md:px-4 py-4">${{getPrice(key)}}</td>
                                <td class="px-6 md:px-4 py-4">{{quantity}}</td>
                                <td class="px-6 md:px-4 py-4">${{quantity * getPrice(key)}}</td>
                                <td> <button class="bg-gray-200 hover:scale-125">
                                    <svg @click="removeItem(key)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 cursor-pointer hover:stroke-blue-900 stroke-gray-700">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                        </svg>
                                    </button></td>
                                </tr>

                               
                            </table>

                           
                            
                        </div>

                        <p v-if="!Object.keys(cart).length" class="text-center text-gray-300">No item Found</p>

                        <div class="flex flex-row justify-between items-center text-gray-300 mx-4">
                            <p class="text-gray-300">Total ${{calculateTotal()}}</p>

                            <button class="bg-gray-300 text-gray-700 text-sm px-4 py-2 rounded-lg hover:bg-blue-700 hover:text-gray-200">Checkout</button>
                            </div>

                                </div>
                </p>
               
                <div>
                    <div class="bg-[url('/img/food2.jpg')] md:py-56 py-32 flex flex-row justify-center items-center bg-no-repeat h-1/2 md:w-full bg-cover">
                        <div class="max-w-4xl ">
                            <p class="animate-pulse text-gray-100 font-bold md:text-8xl text-4xl text-center border-t-8 border-b-8 border-sky-500">Real African Dish</p>
                     
                            </div>
                           </div>
                </div>
                
    
            </header>
            
            <!--End Header-->


    
            <!--Main Content-->
            <main class="md:flex md:flex-col md:justify-center md:items-center mx-4">
                <div class="max-w-4xl">
                    <div class="flex flex-row justify-center items-center hover:animate-bounce">
                        <p class="md:text-3xl text-2xl md:w-1/5 text-gray-700 font-mono border-b-4 border-sky-500 font-bold text-center my-4">{{ mainhead }}</p>

                        </div>
                    
                    <div class="flex flex-col md:flex-row justify-center items-center w-full">  
                        <div v-for="(product, i) in inventory.slice(0,3)" :key="product.id" class="flex flex-col justify-center w-full md:w-1/3 my-4 mx-2 bg-white shadow-xl">
                            <p class="font-bold bg-gradient-to-r from-cyan-500 to-red-500 text-gray-200 py-2 px-2">{{product.name}}</p>
                            
                            <img @click="modetoggle" src="img/banga.jpg" class="cursor-pointer" />
                            <div v-if="modal" class="mx-8 md:mx-0 absolute right-0 left-0 top-0 bottom-0 bg-black/40 flex flex-col justify-center items-center shadow-xl mx-8">
                                <div class="flex flex-col justify-center items-center bg-gray-200 md:w-1/2 w-full py-16 relative">
                                    <p class="text-center text-2xl font-bold text-gray-800 mb-4">{{product.name}}</p>
                                    <img src="img/banga.jpg"/>

                                    <svg @click="modal= false" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 absolute top-4 right-4 cursor-pointer">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>

                                    <p class="text-center py-4"><span class="font-bold">Type:</span> <span class="italic">{{product.type}}</span></p>
                                    <p class="text-center"><span class="font-bold">Price:</span> ${{product.type.USD}}</p>
                                    <p class="text-center mb-8 mt-5"><span class="font-bold">Quantity:</span> <span class="italic"><input type="number" v-model.number="product.quantity" class="shadow px-2 bg-gray-200"/></span></p>
                                    
                                    <div class="flex flex-row justify-end items-end mb-4">
                                        <button @click="addToCart(product.name, i)" class="rounded-lg bg-gradient-to-r from-sky-500 to-red-500 text-gray-200 px-4 py-2 text-sm"> Add to cart</button>
                                        </div>
                                    

                                    </div>
                                
                                </div>


                            <p class="text-center py-4"><span class="font-bold">Type:</span> <span class="italic">{{product.type}}</span></p>
                            <p class="text-center"><span class="font-bold">Price:</span> ${{product.price.USD}}</p>
                            <p class="text-center mb-4 mt-5"><span class="font-bold">Quantity:</span> <span class="italic"><input type="number" v-model.number="product.quantity" class="shadow px-2 bg-gray-200"/></span></p>
                            
                            <div class="flex flex-row justify-end items-end mr-4 mb-4">
                                        <button @click="addToCart(product.name, i)" class="rounded-lg bg-gradient-to-r from-gray-500 to-red-500 text-gray-200 px-4 py-2 text-sm"> Add to cart</button>
                                        </div>

                            </div>

                            
                            

                            

                        </div>
                </div>
            </main>
            <!--End Main Content-->
    

            <!--footer-->
            <footer>
                <div>
                    <div class="bg-black/80 text-gray-200 text-sm font-light py-4">
                        <p class="text-center">Copyright 2022@Smartconcept</p>
                        </div>
                </div>
            </footer>
            <!--End footer-->


            <!--Vue Script-->
            <script>

                let app = Vue.createApp({
                    props: ['cart'],
                    data: function(){
                        return {
                            show: false,
                            visible: false,
                            mainhead: 'Menu List',
                            modal: false,
                            modal2: false,
                            modal3: false,
                            inventory: [],
                            cart: {}

                        }
                    },
                    computed: {
                        totalQuantity(){
                            return Object.values(this.cart).reduce((acc, curr) => {
                                return acc + curr
                            }, 0)
                        }
                    },
                    methods: {
                        toggler(){
                            this.show = !this.show
                        },
                        visibletoggler(){
                            this.visible = !this.visible
                        },
                        modetoggle(){
                            this.modal = !this.modal
                        },
                        mode2toggle(){
                            this.modal2 = !this.modal2
                        },
                        mode3toggle(){
                            this.modal3 = !this.modal3
                        },
                        addToCart(type){
                            this.cart[type] += this.inventory[type]
                            console.log(this.cart)
                        },
                        addToCart(name, index){
                            if(!this.cart[name]) this.cart[name] = 0
                            return this.cart[name] += this.inventory[index].quantity
                            this.inventory[index].quantity = 0
                        },
                        getPrice(name){
                            const product = this.inventory.find((p) => {
                                return p.name === name
                            })
                            return (product.price.USD).toFixed(2)
                        },
                        calculateTotal(){
                            const total = Object.entries(this.cart).reduce((acc, curr, index) => {
                                return acc + (curr[1] * this.getPrice(curr[0]))
                            }, 0)
                            return total.toFixed(2)
                        },
                        removeItem(name){
                            delete this.cart[name]
                        }
                    },
                    async mounted(){
                        const res = await fetch('food.json')
                        const data = await res.json()
                        this.inventory = data
                    }
                })
               
             
               
               

                app.mount('#app')

            </script>


        </div>
        
        </body>